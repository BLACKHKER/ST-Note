## C++ VS环境搭建与运行

### 一、环境搭建

#### 1.1 配置编译生成的程序类型

右键项目，属性

![image-20231211104457951](https://typora-picture-zhao.oss-cn-beijing.aliyuncs.com/Typora/image-20231211104457951.png)

配置编译后生成的程序类型为二进制可执行文件

![image-20231211104750848](https://typora-picture-zhao.oss-cn-beijing.aliyuncs.com/Typora/image-20231211104750848.png)





#### 1.2 添加编译命令按钮到控制台

> 编译默认快捷键是Ctrl + F7

操作台下拉菜单，选择添加或移除按钮

![image-20231211110400525](https://typora-picture-zhao.oss-cn-beijing.aliyuncs.com/Typora/image-20231211110400525.png)

自定义

![image-20231211110452628](https://typora-picture-zhao.oss-cn-beijing.aliyuncs.com/Typora/image-20231211110452628.png)

命令 → 标准 → 添加命令

![image-20231211110905458](https://typora-picture-zhao.oss-cn-beijing.aliyuncs.com/Typora/image-20231211110905458.png)

生成 → 编译

![image-20231211110614678](https://typora-picture-zhao.oss-cn-beijing.aliyuncs.com/Typora/image-20231211110614678.png)

界面会多一个按钮，可以自己移动位置

![image-20231211111011707](https://typora-picture-zhao.oss-cn-beijing.aliyuncs.com/Typora/image-20231211111011707.png)





#### 1.5 配置输出目录

##### 1.5.1 过滤器目录

VS原生的目录是过滤器目录，他是一个模拟的目录，文件实际在同一目录下：

![image-20231218111105567](A:\Typora\TyporaPicture\image-20231218111105567.png)

可以在上方切换成实际目录：

![image-20231218111258037](A:\Typora\TyporaPicture\image-20231218111258037.png)

默认是没有src文件夹的，一般需要创建src保存cpp文件：

![image-20231218111409971](A:\Typora\TyporaPicture\image-20231218111409971.png)



##### 1.5.2 输出目录

> 包含中间文件和exe可执行程序

生成的.exe可执行文件目录一般放在Debug目录(解决方案-项目名 → 平台-x64 → 配置-Debug)下，更改这个目录为其他目录：

右键项目 → 属性 → 要改成的目录

![image-20231218111832332](A:\Typora\TyporaPicture\image-20231218111832332.png)

设置为全局配置

![image-20231218112813994](A:\Typora\TyporaPicture\image-20231218112813994.png)

所有平台应用这套配置

![image-20231218133018819](A:\Typora\TyporaPicture\image-20231218133018819.png)

修改输出目录，对应为解决方案(项目名) → bin → 平台(x64、x86) → 编译配置(Debug、Release)

```
$(SolutionDir)\bin\$(Platform)\$(Configuration)\
```

![image-20231218133724251](A:\Typora\TyporaPicture\image-20231218133724251.png)

修改中间目录

```
$(SolutionDir)\bin\intermediates\$(Platform)\$(Configuration)\
```

![image-20231218134526716](A:\Typora\TyporaPicture\image-20231218134526716.png)

右键解决方案 → 清理解决方案

![image-20231218134638792](A:\Typora\TyporaPicture\image-20231218134638792.png)

手动去项目文件夹删除旧的Debug文件夹(src里面是.cpp、.h)

![image-20231218135203235](A:\Typora\TyporaPicture\image-20231218135203235.png)

回到VS → 右键项目 → build

![image-20231218135341884](A:\Typora\TyporaPicture\image-20231218135341884.png)

最终的项目结构

![image-20231218135810797](A:\Typora\TyporaPicture\image-20231218135810797.png)

![image-20231218135751575](A:\Typora\TyporaPicture\image-20231218135751575.png)









#### 1.4 配置其他内容

![image-20231211105020465](https://typora-picture-zhao.oss-cn-beijing.aliyuncs.com/Typora/image-20231211105020465.png)





---



### 二、编译/运行

#### 2.1 模板

```c++
/* IO输入输出，同C语言的引入头文件<stdio.h> */
#include <iostream>

int main()
{
    /* `<<`在C++中不是运算符，可以理解为一个函数：*/
    /* 
        表示将字符串`Hello World`推送到cout流中，然后打印到终端，然后推送一个行结束符(endLine)
        endl告诉终端跳到下一行，等同于C的`\n`
    */
    std::cout << "Hello World!" << std::endl;
    
    /* 上面这句等同于(2022不支持print，没有这个成员)： */
    std::cout.print("Hello World!").printf(std::endl);
    
    /* 
        cin.get()函数是等待状态，等待终端按下Enter，在前往下一句代码之前等待，此时程序暂停执行 
        目的是为了解决exe执行完自动退出导致的“闪退”现象
    */
    std::cin.get();
    ...
    /* main函数在没有return的情况下，默认返回0，代表程序执行完毕，仅针对main函数 */
}
```





#### 2.2 编译

##### 2.2.1 单个文件

在想要编译的文件点击编译按钮或快捷键(Ctrl + F7)，执行编译

编译后会生成`.obj`文件，项目中的每个C++文件，都会生成对应的obj文件

![image-20231211143004748](https://typora-picture-zhao.oss-cn-beijing.aliyuncs.com/Typora/image-20231211143004748.png)



##### 2.2.2 整个项目编译

解决方案资源管理器中右键项目 → 生成

![image-20231211143213106](https://typora-picture-zhao.oss-cn-beijing.aliyuncs.com/Typora/image-20231211143213106.png)

生成后文件夹下会多一个可执行文件xxx.exe，可直接双击执行：

![image-20231211143254934](https://typora-picture-zhao.oss-cn-beijing.aliyuncs.com/Typora/image-20231211143254934.png)